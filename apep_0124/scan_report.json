{
  "paper_id": "apep_0124",
  "scan_date": "2026-02-06T12:47:37.678013+00:00",
  "scan_version": "2.0.0",
  "model": "openai/gpt-5.2",
  "overall_verdict": "SUSPICIOUS",
  "files_scanned": 8,
  "flags": [
    {
      "category": "METHODOLOGY_MISMATCH",
      "severity": "HIGH",
      "file": "03_main_analysis.R",
      "lines": [
        22,
        52
      ],
      "evidence": "The manuscript defines the outcome as turnout in subsequent referendums in the *same policy domain* occurring 1\u20133 years after the focal referendum (municipality \u00d7 focal referendum \u00d7 subsequent referendum). The code instead constructs the outcome as the municipality\u2019s *average turnout by year across all votes* in years t+1..t+3, then averages those yearly averages. This is not domain-restricted and is not referendum-specific; it also changes the estimand and the observation structure relative to the paper\u2019s described 311,702 municipality\u00d7focal\u00d7subsequent observations.: muni_future <- muni_turnout %>%\n  select(muni_id, future_year = vote_year, subsequent_turnout = avg_turnout)\n\nfocal_with_outcome <- focal_votes %>%\n  left_join(muni_future, by = \"muni_id\", relationship = \"many-to-many\") %>%\n  filter(future_year > vote_year, future_year <= vote_year + 3) %>%\n  group_by(vote_proposal_id, muni_id, vote_date, vote_year,\n           yes_pct, running_var, local_win, turnout_pct, eligible_voters,\n           kanton_name, language_region, policy_domain) %>%\n  summarise(\n    subsequent_turnout = mean(subsequent_turnout, na.rm = TRUE),\n    n_future_years = n(),\n    .groups = \"drop\"\n  )",
      "confidence": 0.95
    },
    {
      "category": "METHODOLOGY_MISMATCH",
      "severity": "HIGH",
      "file": "02_clean_data.R",
      "lines": [
        26,
        44
      ],
      "evidence": "The paper states municipal results are merged to Swissvotes using referendum identifiers (e.g., anr/vorlagenId) and date. The code merges Swissvotes metadata to municipal data *only by vote_date*. Because each voting day contains multiple proposals, joining only on date can assign the wrong policy_domain (and other metadata) to many municipal proposal records. This directly affects the paper\u2019s domain-based outcome construction (already mismatched) and any domain heterogeneity analysis.: municipal_merged <- municipal_results %>%\n  left_join(\n    swissvotes %>%\n      select(vote_date, vote_id, policy_domain, passed),\n    by = \"vote_date\"\n  )",
      "confidence": 0.95
    },
    {
      "category": "METHODOLOGY_MISMATCH",
      "severity": "MEDIUM",
      "file": "02_clean_data.R",
      "lines": [
        55,
        66
      ],
      "evidence": "The manuscript defines treatment as D=1 if yes-share >= 50% (i.e., X>=0). The code uses a strict >50% rule. Exact 50% municipalities (if any) are coded as control rather than treated, shifting the cutoff rule relative to the paper.: running_var = yes_pct - 50,\nlocal_win = as.integer(yes_pct > 50),",
      "confidence": 0.75
    },
    {
      "category": "SUSPICIOUS_TRANSFORMS",
      "severity": "MEDIUM",
      "file": "02_clean_data.R",
      "lines": [
        86,
        105
      ],
      "evidence": "The code constructs (i) an unused 'close_votes' subset with an ad hoc \u00b115pp window, and (ii) a municipality-year panel completed through 2024, while the manuscript describes focal votes 2010\u20132019 and outcome data through 2022 (and an outcome based on subsequent referendums, not municipality-year completion). These transforms are not used consistently, but they are red flags for drifting sample definitions and time windows relative to the paper.: # For RDD: Focus on close votes (within bandwidth of cutoff)\n# Define \"close\" as within 15 percentage points of 50%\nclose_votes <- analysis_data %>%\n  filter(abs(running_var) <= 15)\n\n# ...\n\n# Create balanced panel (municipality-year)\nmuni_year_panel <- muni_year_turnout %>%\n  complete(muni_id, vote_year = 2010:2024)",
      "confidence": 0.7
    },
    {
      "category": "HARD_CODED_RESULTS",
      "severity": "MEDIUM",
      "file": "06_tables.R",
      "lines": [
        129,
        177
      ],
      "evidence": "Table 4 (Validity tests) hard-codes placeholders (\u201c--\u201d) for covariate balance and placebo cutoffs instead of computing and populating the statistics/p-values. Given the manuscript reports specific balance test estimates and multiple placebo results, leaving these as hard-coded dashes undermines traceability from code to manuscript claims and invites selective transcription outside the pipeline.: latex_table4 <- paste0(\n  \"\\\\begin{table}[htbp]\\n\",\n  \"\\\\centering\\n\",\n  \"\\\\caption{RDD Validity Tests}\\n\",\n  \"\\\\label{tab:validity}\\n\",\n  \"\\\\begin{tabular}{lcc}\\n\",\n  \"\\\\hline\\\\hline\\n\",\n  \"Test & Statistic & P-value \\\\\\\\n\",\n  \"\\\\hline\\n\",\n  \"\\\\multicolumn{3}{l}{\\\\textit{Panel A: Manipulation Test}} \\\\\\\\n\",\n  \"McCrary density test & \", round(density$test_statistic, 3), \" & \",\n  round(density$p_value, 3), \" \\\\\\\\n\",\n  \"[0.5em]\\n\",\n  \"\\\\multicolumn{3}{l}{\\\\textit{Panel B: Covariate Balance}} \\\\\\\\n\",\n  \"Focal vote turnout & -- & -- \\\\\\\\n\",\n  \"Log(eligible voters) & -- & -- \\\\\\\\n\",\n  \"[0.5em]\\n\",\n  \"\\\\multicolumn{3}{l}{\\\\textit{Panel C: Placebo Cutoffs}} \\\\\\\\n\",\n  \"Cutoff at -20pp & -- & -- \\\\\\\\n\",\n  \"Cutoff at -10pp & -- & -- \\\\\\\\n\",\n  \"Cutoff at +10pp & -- & -- \\\\\\\\n\",\n  \"Cutoff at +20pp & -- & -- \\\\\\\\n\",\n  \"\\\\hline\\\\hline\\n\",\n  \"\\\\end{tabular}\\n\",",
      "confidence": 0.9
    },
    {
      "category": "DATA_PROVENANCE_MISSING",
      "severity": "LOW",
      "file": "02_clean_data.R",
      "lines": [
        33,
        52
      ],
      "evidence": "The code comments acknowledge that correct identifiers should be used (vote_id/vorlage_id) but then proceeds with a date-only merge. This is not a missing-data-source problem (data are fetched from documented URLs), but it is a provenance/lineage weakness: key metadata fields (policy_domain, passed) are not reliably attributable to the correct proposal-level observation.: # Match on vote date and vorlage_id (both are BFS numbers)\n# For now, match on vote_date only and extract proposal info from title\n\n# Create mapping of Swissvotes to municipal data\n# The vorlage_id in municipal data should correspond to bfs_nummer in swissvotes",
      "confidence": 0.75
    }
  ],
  "file_verdicts": [
    {
      "file": "01_fetch_data.R",
      "verdict": "CLEAN"
    },
    {
      "file": "06_tables.R",
      "verdict": "CLEAN"
    },
    {
      "file": "00_packages.R",
      "verdict": "CLEAN"
    },
    {
      "file": "04_robustness.R",
      "verdict": "CLEAN"
    },
    {
      "file": "02_clean_data.R",
      "verdict": "SUSPICIOUS"
    },
    {
      "file": "03_main_analysis.R",
      "verdict": "SUSPICIOUS"
    },
    {
      "file": "05_figures.R",
      "verdict": "CLEAN"
    },
    {
      "file": "01_fetch_data.py",
      "verdict": "CLEAN"
    }
  ],
  "summary": {
    "verdict": "SUSPICIOUS",
    "counts": {
      "CRITICAL": 0,
      "HIGH": 2,
      "MEDIUM": 3,
      "LOW": 1
    },
    "one_liner": "method mismatch",
    "executive_summary": "The code operationalizes key variables in ways that conflict with the manuscript\u2019s described methodology. In `03_main_analysis.R`, the outcome is not restricted to turnout in subsequent referendums within the same policy domain occurring 1\u20133 years after the focal vote, undermining the paper\u2019s stated municipality \u00d7 focal referendum \u00d7 subsequent referendum design. In `02_clean_data.R`, Swissvotes metadata are merged to municipal results using only `vote_date` rather than referendum identifiers (e.g., `anr`/`vorlagenId`) plus date, which can mis-link referendums\u2014especially when multiple ballots occur on the same day\u2014and propagate incorrect covariates/treatment labels into the analysis.",
    "top_issues": [
      {
        "category": "METHODOLOGY_MISMATCH",
        "severity": "HIGH",
        "short": "The manuscript defines the outcome as turnout in subseque...",
        "file": "03_main_analysis.R",
        "lines": [
          22,
          52
        ],
        "github_url": "https://github.com/SocialCatalystLab/ape-papers/blob/main/apep_0124/code/03_main_analysis.R#L22-L52"
      },
      {
        "category": "METHODOLOGY_MISMATCH",
        "severity": "HIGH",
        "short": "The paper states municipal results are merged to Swissvot...",
        "file": "02_clean_data.R",
        "lines": [
          26,
          44
        ],
        "github_url": "https://github.com/SocialCatalystLab/ape-papers/blob/main/apep_0124/code/02_clean_data.R#L26-L44"
      }
    ],
    "full_report_url": "https://github.com/SocialCatalystLab/ape-papers/blob/main/tournament/corpus_scanner/scans/apep_0124_scan.json"
  },
  "error": null
}