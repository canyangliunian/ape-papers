{
  "paper_id": "apep_0080",
  "scan_date": "2026-02-06T12:42:34.139132+00:00",
  "scan_version": "2.0.0",
  "model": "openai/gpt-5.2",
  "overall_verdict": "SUSPICIOUS",
  "files_scanned": 7,
  "flags": [
    {
      "category": "METHODOLOGY_MISMATCH",
      "severity": "HIGH",
      "file": "02_clean_data.R",
      "lines": [
        52,
        82,
        83,
        84
      ],
      "evidence": "The manuscript states the running variable is distance to the nearest opposite-type state polygon based on enforcement at the crash date (primary vs secondary at that time). The code instead defines 'border_is_primary' purely as whether a state EVER has primary enforcement in the seatbelt_laws table (enforcement_type == 'primary'), ignoring primary_date timing. This means that, for years before a state's upgrade to primary, the distance computation can treat that state as 'primary' for distance purposes even when it was actually secondary at the time. This can change the running variable and which observations fall within 100km, affecting RD estimates and validity tests.: # Get all states and their enforcement type (simplified - use 2019 status for borders)\n# This defines which borders exist, not treatment assignment\nstate_status <- state_enforcement %>%\n  mutate(border_is_primary = enforcement_type == \"primary\") %>%\n  select(state_abbr, border_is_primary)",
      "confidence": 0.9
    },
    {
      "category": "METHODOLOGY_MISMATCH",
      "severity": "HIGH",
      "file": "02_clean_data.R",
      "lines": [
        32,
        33,
        34,
        35,
        36
      ],
      "evidence": "The code claims to classify treatment using the EXACT crash date relative to the state's effective date, but the analysis dataset as created in 01_fetch_data.R does not reliably include a crash 'day' variable (only 'day_week' is explicitly selected; there is no explicit selection of a day-of-month variable such as 'day'). If 'day' is missing/NA, this construction defaults to day=1 via pmax(1, ...), collapsing all crashes within a month onto the 1st. That can misclassify treatment around adoption dates that occur mid-month (e.g., '2006-12-01' is okay, but many states have non-1st dates). This contradicts the manuscript's claim of crash-date-level classification and can bias treatment assignment near adoption.: crash_date = as.Date(sprintf(\"%04d-%02d-%02d\", year,\n                                  pmax(1, pmin(12, as.numeric(month))),\n                                  pmax(1, pmin(28, as.numeric(day)))),\n                         format = \"%Y-%m-%d\")",
      "confidence": 0.85
    },
    {
      "category": "DATA_PROVENANCE_MISSING",
      "severity": "MEDIUM",
      "file": "02_clean_data.R",
      "lines": [
        32,
        33,
        34,
        35,
        36
      ],
      "evidence": "Variables 'month' and especially 'day' are used to construct crash_date, but the upstream fetch/clean step (01_fetch_data.R) does not clearly ensure a day-of-month field is loaded/standardized across years. If 'day' is not present in fars_sf, the crash_date silently becomes the first of the month. This is a provenance/availability problem for a key variable used to assign treatment status.: crash_date = as.Date(sprintf(\"%04d-%02d-%02d\", year,\n                                  pmax(1, pmin(12, as.numeric(month))),\n                                  pmax(1, pmin(28, as.numeric(day)))),\n                         format = \"%Y-%m-%d\")",
      "confidence": 0.75
    },
    {
      "category": "METHODOLOGY_MISMATCH",
      "severity": "MEDIUM",
      "file": "06_tables.R",
      "lines": [
        67
      ],
      "evidence": "The manuscript describes the main analysis period as 2001\u20132019 (FARS geocoded data). The code\u2019s table caption hard-codes '2000-2020' even though 02_clean_data.R computes distances only for 2001:2019 and the manuscript emphasizes 2001\u20132019. This is an internal consistency/reporting issue (likely a caption bug) that can mislead readers about the sample period.: cat(\"\\\\caption{Summary Statistics: Fatal Crashes Near State Borders, 2000-2020}\\\\n\")",
      "confidence": 0.8
    },
    {
      "category": "HARD_CODED_RESULTS",
      "severity": "LOW",
      "file": "01_fetch_data.R",
      "lines": [
        14,
        15,
        16,
        17,
        18,
        19,
        20,
        21,
        22,
        23
      ],
      "evidence": "Primary enforcement effective dates are manually hard-coded in the script rather than fetched programmatically from IIHS or a cited machine-readable source. The manuscript says the dates come from IIHS, so this is likely legitimate transcription, but for auditability it would be preferable to include a raw download/scrape step or a frozen source file with citation/versioning.: seatbelt_laws <- tribble(\n  ~state, ~state_abbr, ~enforcement_type, ~primary_date,\n  \"Alabama\", \"AL\", \"primary\", \"1999-12-09\",\n  \"Alaska\", \"AK\", \"primary\", \"2006-05-01\",\n  \"Arizona\", \"AZ\", \"secondary\", NA_character_,\n  ...\n) %>%\n  mutate(primary_date = as.Date(primary_date))",
      "confidence": 0.7
    }
  ],
  "file_verdicts": [
    {
      "file": "01_fetch_data.R",
      "verdict": "CLEAN"
    },
    {
      "file": "06_tables.R",
      "verdict": "CLEAN"
    },
    {
      "file": "00_packages.R",
      "verdict": "CLEAN"
    },
    {
      "file": "04_robustness.R",
      "verdict": "CLEAN"
    },
    {
      "file": "02_clean_data.R",
      "verdict": "SUSPICIOUS"
    },
    {
      "file": "03_main_analysis.R",
      "verdict": "CLEAN"
    },
    {
      "file": "05_figures.R",
      "verdict": "CLEAN"
    }
  ],
  "summary": {
    "verdict": "SUSPICIOUS",
    "counts": {
      "CRITICAL": 0,
      "HIGH": 2,
      "MEDIUM": 2,
      "LOW": 1
    },
    "one_liner": "method mismatch",
    "executive_summary": "The data-cleaning code does not implement the manuscript\u2019s stated running variable: instead of using distance to the nearest opposite-type *state polygon defined by enforcement status at the crash date* (primary vs. secondary in force at that time), `02_clean_data.R` defines a different distance/\u201copposite type\u201d construct that is not time-aligned to enforcement at the crash date. In addition, treatment assignment is described in the code as using the *exact crash date* relative to each state\u2019s effective date, but the dataset produced in `01_fetch_data.R` does not reliably contain the crash **day**, making day-precise classification impossible and potentially misclassifying observations around policy change dates.",
    "top_issues": [
      {
        "category": "METHODOLOGY_MISMATCH",
        "severity": "HIGH",
        "short": "The manuscript states the running variable is distance to...",
        "file": "02_clean_data.R",
        "lines": [
          52,
          82
        ],
        "github_url": "/apep_0080/code/02_clean_data.R#L52-L84"
      },
      {
        "category": "METHODOLOGY_MISMATCH",
        "severity": "HIGH",
        "short": "The code claims to classify treatment using the EXACT cra...",
        "file": "02_clean_data.R",
        "lines": [
          32,
          33
        ],
        "github_url": "/apep_0080/code/02_clean_data.R#L32-L36"
      }
    ],
    "full_report_url": "/tournament/corpus_scanner/scans/apep_0080_scan.json"
  },
  "error": null
}